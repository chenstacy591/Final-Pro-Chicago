---
title: "Chicago Domestic Crimes During Pandemic"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=F, warning=F)
domvio <- read.csv("chicago.csv")
library(tidyverse)
```


```{r mutate data to make month day year}
domvio<-domvio %>%
  mutate(MONTH = substring(DATE..OF.OCCURRENCE, 0, 2)) %>% 
  mutate(DAY = substring(DATE..OF.OCCURRENCE, 4,5)) %>% 
  mutate(YEAR = substring(DATE..OF.OCCURRENCE, 7,10))

#heres what the data looks like
glimpse(domvio)
  
```

```{r making indicators}
domvio_mut<-domvio

#create an indicator for being before covid entirely
#this indicator is "isbeforecovid"
domvio_mut<-domvio_mut %>%
  mutate(isbeforecovid = case_when(
    YEAR == 2019 ~ 1,
    YEAR == 2020 & MONTH == 01 & DAY <=24 ~ 1 ,
    YEAR == 2020 & MONTH == 01 & DAY > 24 ~ 0,
    YEAR == 2020 & MONTH > 1 ~ 0
    ))

#create an indicator for being before lockdown (tho covid is in the USA)
#this indicator is "isprelockdown"
domvio_mut<-domvio_mut %>%
  mutate(isbeforecovid = case_when(
    YEAR =="2019" ~ 0,
    YEAR == "2020" & MONTH == "01" & DAY <=24 ~0,
    YEAR == "2020" & MONTH == "01" & DAY > 24 ~ 1,
    YEAR == "2020" & MONTH == "02"  ~ 1, 
    YEAR == "2020"  & MONTH == "03" & DAY < "22" ~ 1,
    YEAR == "2020"  & MONTH == "03" & DAY >= "22" ~ 0,
    YEAR == "2020"  & MONTH > "03" ~ 0
    ))
#create an indicator for being in the lockdown
#this indicator is "islockdown"
domvio_mut<-domvio_mut %>%
  mutate(islockdown = case_when(
    YEAR =="2019" ~ 0,
    YEAR == "2020" & MONTH < "03" ~ 0, 
    YEAR == "2020" & MONTH == "03" & DAY < "22" ~ 0,
    YEAR == "2020" & MONTH == "03" & DAY >= "22" ~ 1,
    YEAR == "2020" & MONTH == "04" ~ 1,
    YEAR == "2020" & MONTH == "05" & DAY <= "29" ~ 1,
    YEAR == "2020" & MONTH == "05" & DAY > "29" ~ 0,
    YEAR == "2020" & MONTH > "05" ~ 0

    ))

#create an indicator for the recovery period
#this indicator is "isrecovery"

domvio_mut<-domvio_mut %>%
  mutate(isrecovery = case_when(
    YEAR =="2019" ~ 0,
    YEAR == "2020" & MONTH < "05" ~ 0,
    YEAR == "2020" & MONTH == "05" & DAY <= "29" ~ 0,
    YEAR == "2020" & MONTH == "05" & DAY > "29" ~ 1,
    YEAR == "2020" & MONTH > "05" ~ 1

    ))

#create an indicator for phase 3 in the recovery
#this indicator is "isphase3"

domvio_mut<-domvio_mut %>%
  mutate(isphase3 = case_when(
    YEAR =="2019" ~ 0,
    YEAR == "2020" & MONTH < "06" ~ 0,
    YEAR == "2020" & MONTH == "06" & DAY < "03" ~ 0,
    YEAR == "2020" & MONTH == "06" & DAY >= "03" & DAY < "26" ~ 1,
    YEAR == "2020" & MONTH == "06" &  DAY >= "26" ~ 0,
    YEAR == "2020" & MONTH > "06" ~ 0

    ))

#create an indicator for phase 4 in the recovery
#this indicator is "isphase4"

domvio_mut<-domvio_mut %>%
  mutate(isphase4 = case_when(
    YEAR =="2019" ~ 0,
    YEAR == "2020" & MONTH < "06" ~ 0,
        YEAR == "2020" & MONTH == "06" & DAY < "26" ~ 0,
    YEAR == "2020" & MONTH == "06" & DAY >= "26"~ 1,
    YEAR == "2020" & MONTH >"06" ~ 1

    ))
#create an indicator for cases of dom violence
#this indicator is "isdomviolence"

domvio_mut<-domvio_mut %>%
  mutate(isdomviolence = case_when(
    SECONDARY.DESCRIPTION == "DOMESTIC BATTERY SIMPLE" ~ 1,
    SECONDARY.DESCRIPTION != "DOMESTIC BATTERY SIMPLE" ~ 0
    ))

#create an indicator for cases of dom violence
#this indicator is "isdomviolence"

glimpse(domvio_mut)
  
```

```{r lookning at some data pointsss}
#if you are wondering about how the actual data looks like there it is
#number of observations during lockdown
domvio_mut %>% 
  count (islockdown)

#number of observations during recovery
domvio_mut %>% 
  count (isrecovery)

#number of observations during p3, p4
domvio_mut %>% 
  count (isphase3)
domvio_mut %>% 
  count(isphase4)

#number of observations during in 2020 pre covid
domvio_mut %>% 
  count (isbeforecovid)


#number of cases of domestic violence
domvio_mut %>% 
  count(isdomviolence)

#see number of cases of domestic violence on a given day
domvio_mut %>% 
  filter(YEAR=="2020") %>% 
  filter(MONTH=="05") %>% 
  filter(DAY=="30") %>% 
  count(isdomviolence)

#observations of dom violence on a day or month
domvio_mut %>% 
  filter(YEAR=="2019") %>% 
  filter(MONTH=="07") %>%
  count(isdomviolence)
```
